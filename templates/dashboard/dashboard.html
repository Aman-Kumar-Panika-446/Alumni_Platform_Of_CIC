{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Dashboard</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
</head>
<body>
  {% include "base/message.html" %}
  <!-- NAVBAR -->
  {% include "base/header.html" %}

  <!-- SIDEBAR-->
  {% include "base/dashboard/sidebar.html" %}

    <!-- Profile Content -->
    <div class="profile-card">

      <!-- Left Column -->
      <div class="profile-left">
        {% if request.user.profile_pic %}
          <img src="{{ request.user.profile_pic.url }}" class="profile-img" alt="Profile">
        {% else %}
          <img src="{% static 'dashboard/images/avatar.png' %}" class="profile-img" alt="Profile">
        {% endif %}

        <h2>{{ request.user.first_name | title }} {{ request.user.last_name | title}}</h2>
        <p class="muted">{{ request.user.role }}</p>

        <!-- Update Button -->
        <form method="post" enctype="multipart/form-data" class="profile-update-btn" action = "{% url 'dashboard:update_profile_pic' %}">
          {% csrf_token %}
          <input type="file" id="profile_pic" name="profile_pic" style="display:none;" accept="image/*" onchange="this.form.submit();">
          <button type="button" class="upload-btn" onclick="document.getElementById('profile_pic').click();">Update Image</button>

        </form>
      </div>

      <!-- Right Column -->
      <div class="profile-right">
        
        <!-- Academic Details -->
        <section class="info-section">
          <h2>ðŸŽ“ Academic Details</h2>
          <form class="info-form">
            <label>Email</label>
            <input type="text" value="{{ request.user.email }}" readonly>

            <label>Enrolment</label>
            <input type="text" value="{{ request.user.enrolment_no }}" readonly>

            <label>Course</label>
            <input type="text" value="{{ request.user.course_name }}" readonly>

            <label>Batch</label>
            <input type="text" value="{{ request.user.starting_year }} - {{ request.user.ending_year }}" readonly>
          </form>
        </section>

        <!-- Professional / Student Details -->
        <section class="info-section">
          <h2>ðŸ’¼ Professional Details <a class="edit-btn" href="{% url 'dashboard:edit_current_status' %}"><i class="fas fa-edit"></i></a></h2>
          {% if request.user.role == "Alumni" %}
          <form class="info-form">
            <label>Status</label>
            <input type="text" value="{{ request.user.AlumniDetails.current_status }}" readonly>

            <label>Location</label>
            <input type="text" value="{{ request.user.AlumniDetails.location }}" readonly>

            {% if request.user.AlumniDetails.current_status == "Job" %}
              <label>Organization</label>
              <input type="text" value="{{ request.user.AlumniDetails.WorkingProfessional.organization_name }}" readonly>

              <label>Designation</label>
              <input type="text" value="{{ request.user.AlumniDetails.WorkingProfessional.designation }}" readonly>

            {% elif request.user.AlumniDetails.current_status == "Higher Studies" %}
              <label>Institute</label>
              <input type="text" value="{{ request.user.AlumniDetails.HigherStudies.organization_name }}" readonly>

              <label>Domain</label>
              <input type="text" value="{{ request.user.AlumniDetails.HigherStudies.domain }}" readonly>

            {% elif request.user.AlumniDetails.current_status == "Startup" %}
              <label>Startup Name</label>
              <input type="text" value="{{ request.user.AlumniDetails.Startup.startup_name }}" readonly>

              <label>About Startup</label>
              <textarea readonly>{{ request.user.AlumniDetails.Startup.description }}</textarea>

            {% else %}
              <label>Description</label>
              <textarea readonly>{{ request.user.AlumniDetails.Others.description }}</textarea>
            {% endif %}
          </form>
          
          {% else %}
          <form class="info-form">
            <label>Current Year</label>
            <input type="text" value="{{ request.user.StudentDetails.current_year }}" readonly>

            <label>Hometown</label>
            <input type="text" value="{{ request.user.StudentDetails.home_town }}" readonly>
 
            <label>Bio</label>
            <textarea readonly>{{ request.user.StudentDetails.bio }}</textarea>
          </form>
          {% endif %}
        </section>
      </div>
    </div>
  </div>

</body>
</html>
